apiVersion: app.helios.io/v1alpha1
kind: HeliosApp
metadata:
  name: advanced-nodejs-app-v30
  namespace: default
spec:

  description: "Managed by Helios Operator"
  owner: 
  
  # Required Git/Docker Info
  imageRepo: hoangphuc842/advanced-nodejs-app-v30
  gitRepo: "https://github.com/hoangphuc841/advanced-nodejs-app-v30.git"
  gitopsRepo: https://github.com/hoangphuc841/advanced-nodejs-app-v30-gitops
  gitopsPath: "apps/advanced-nodejs-app-v30" # Assumed path
  port: 8080
  replicas: 1
  testCommand: npm ci && npm test
  
  # Webhook Config
  webhookDomain: unstaggering-unoptionally-hugh.ngrok-free.dev
  webhookSecret: "github-credentials-advanced-nodejs-app-v30"
  gitopsSecretRef: "github-credentials-advanced-nodejs-app-v30"

  components:
    - name: advanced-nodejs-app-v30-backend
      type: web-service
      properties:
        image: hoangphuc842/advanced-nodejs-app-v30:latest
        port: 8080
        replicas: 1
        env:
          - name: NODE_ENV
            value: "production"
      traits:
        - type: service
          properties:
            port: 8080
            targetPort: 8080
